function r(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function t(r,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}function n(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}function e(r,t){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(r);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.push.apply(n,e)}return n}function o(r){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?e(Object(o),!0).forEach((function(t){n(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(o,t))}))}return r}function i(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(r)))return;var n=[],e=!0,o=!1,i=void 0;try{for(var a,u=r[Symbol.iterator]();!(e=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);e=!0);}catch(r){o=!0,i=r}finally{try{e||null==u.return||u.return()}finally{if(o)throw i}}return n}(r,t)||function(r,t){if(!r)return;if("string"==typeof r)return a(r,t);var n=Object.prototype.toString.call(r).slice(8,-1);"Object"===n&&r.constructor&&(n=r.constructor.name);if("Map"===n||"Set"===n)return Array.from(r);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var n=0,e=new Array(t);n<t;n++)e[n]=r[n];return e}function u(r){for(var t=function(r){return/\s/.test(r)},n=[],e={},o=0,i=null,a=!1,u=0;u<r.length;){if(a&&(t(r[u])||"{"===r[u]))a=!1,i=r.slice(o,u),"{"===r[u]&&u--;else if(!a&&!t(r[u])){var s="{"===r[u];if(i&&s){var l=c(r,u);if(-1===l)throw new Error('Unbalanced curly braces in string: "'.concat(r,'"'));e[i]=r.slice(u+1,l),u=l,i=null}else i&&(n.push(i),i=null),a=!0,o=u}u++}return a&&(i=r.slice(o)),i&&n.push(i),{args:n,cases:e}}function c(r,t){for(var n=0,e=t+1;e<r.length;e++){var o=r.charAt(e);if("}"===o){if(0===n)return e;n--}else"{"===o&&n++}return-1}function s(r){return l(r.slice(1,-1),",",3)}function l(r,t,n){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!r)return e;if(1===n)return e.push(r),e;var o=r.indexOf(t);if(-1===o)return e.push(r),e;var i=r.substring(0,o).trim(),a=r.substring(o+t.length+1).trim();return e.push(i),l(a,t,n-1,e)}function f(r){return r.reduce((function(r,t){return r.concat(Array.isArray(t)?f(t):t)}),[])}function h(r){var t={};return function(){for(var n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];var i=e.length?e.map((function(r){return null===r?"null":void 0===r?"undefined":"function"==typeof r?r.toString():r instanceof Date?r.toISOString():JSON.stringify(r)})).join("|"):"_(no-args)_";if(Object.prototype.hasOwnProperty.call(t,i))return t[i];var a=r.apply(void 0,e);return t[i]=a,a}}var v=function(){function e(t){var o=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),n(this,"format",h((function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(o.process(r,t)).join("")}))),this.locale=t,this.typeHandlers=i}var o,a,u;return o=e,(a=[{key:"process",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!r)return[];var n=r.indexOf("{");if(-1!==n){var e=c(r,n);if(-1===e)throw new Error('Unbalanced curly braces in string: "'.concat(r,'"'));var o=r.substring(n,e+1);if(o){var a=[],u=r.substring(0,n);u&&a.push(u);var l=s(o),f=i(l,3),h=f[0],v=f[1],p=f[2],y=t[h];null==y&&(y="");var b=v&&this.typeHandlers[v];a.push(b?b(y,p,this.locale,t,this.process.bind(this)):y);var g=r.substring(e+1);return g&&a.push(this.process(g,t)),a}}return[r]}}])&&t(o.prototype,a),u&&t(o,u),e}(),p=0;function y(r,t){for(var n=0,e="",o=0,i={};n<r.length;){if("#"!==r[n]||o)e+=r[n];else{var a="__hashToken".concat(p++);e+="{".concat(a,", number}"),i[a]=t}"{"===r[n]?o++:"}"===r[n]&&o--,n++}return{caseBody:e,numberValues:i}}function b(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0,i=u(t),a=i.args,c=i.cases,s=parseInt(r);a.forEach((function(r){r.startsWith("offset:")&&(s-=parseInt(r.slice("offset:".length)))}));var l=[];1===s&&l.push("one"),l.push("=".concat(s),"other");for(var f=0;f<l.length;f++){var h=l[f];if(h in c){var v=y(c[h],s),p=v.caseBody,b=v.numberValues;return e(p,o(o({},n),b))}}return r}function g(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>3?arguments[3]:void 0,e=arguments.length>4?arguments[4]:void 0,o=u(t),i=o.cases;return r in i?e(i[r],n):"other"in i?e(i.other,n):r}export{v as MessageFormatter,c as findClosingBracket,u as parseCases,b as pluralTypeHandler,g as selectTypeHandler,s as splitFormattedArgument};
//# sourceMappingURL=icu-message-formatter.es.min.js.map
